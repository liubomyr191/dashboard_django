language: python

addons:
  sauce_connect:
    USERNAME: "barseghyanartur"
    secure: "Wc0A5xAjB1QOOGUiAcDjTErJ6xcMV6VU9hZ35vuchOh2hIGvl5fxQWpBketFU7WNse/4ntElog9yR+kLt39YqUOYBeC/YtG4G/VvCi/lTIfNm0Doq4+fwx85dvJ+L2N0C7Q3fLXjcZW0BsI8nK4R51eX2yjI7+s6JckU2wZw0Zc="

# Python versions
python:
  - "2.6"
  - "2.7"
  - "3.3"

# Environments
env:
  - DJANGO15=true
  - DJANGO16=true

# Command to install dependencies
install:
  - pip install -r example/requirements.txt
  - python setup.py install
  - if [[ $TRAVIS_PYTHON_VERSION == '2.6' && $DJANGO15 == true ]]; then pip uninstall Django -y; fi
  - if [[ $TRAVIS_PYTHON_VERSION == '2.6' && $DJANGO15 == true ]]; then pip install Django==1.5.5; fi
  - if [[ $TRAVIS_PYTHON_VERSION == '2.6' && $DJANGO16 == true ]]; then pip uninstall Django -y; fi
  - if [[ $TRAVIS_PYTHON_VERSION == '2.6' && $DJANGO16 == true ]]; then pip install Django==1.6; fi
  - if [[ $TRAVIS_PYTHON_VERSION == '2.7' && $DJANGO15 == true ]]; then pip uninstall Django -y; fi
  - if [[ $TRAVIS_PYTHON_VERSION == '2.7' && $DJANGO15 == true ]]; then pip install Django==1.5.5; fi
  - if [[ $TRAVIS_PYTHON_VERSION == '2.7' && $DJANGO16 == true ]]; then pip uninstall Django -y; fi
  - if [[ $TRAVIS_PYTHON_VERSION == '2.7' && $DJANGO16 == true ]]; then pip install Django==1.6; fi
  #- if [[ $TRAVIS_PYTHON_VERSION == '3.3' ]]; then pip uninstall django-localeurl -y; fi
  - if [[ $TRAVIS_PYTHON_VERSION == '3.3' ]]; then pip install -r example/requirements3.txt; fi
  - if [[ $TRAVIS_PYTHON_VERSION == '3.3' && $DJANGO15 == true ]]; then pip uninstall Django -y; fi
  - if [[ $TRAVIS_PYTHON_VERSION == '3.3' && $DJANGO15 == true ]]; then pip install Django==1.5.5; fi
  - if [[ $TRAVIS_PYTHON_VERSION == '3.3' && $DJANGO16 == true ]]; then pip uninstall Django -y; fi
  - if [[ $TRAVIS_PYTHON_VERSION == '3.3' && $DJANGO16 == true ]]; then pip install Django==1.6; fi
  - mkdir example/db
  - mkdir example/logs
  - mkdir example/media
  - mkdir example/media/static
  - python example/example/manage.py syncdb --noinput --traceback -v 3
# Command to run tests
script: 
  - python example/example/manage.py test dash --traceback -v 3

